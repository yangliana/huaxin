import{_ as b,s as r,L as y,C as x,r as C,o as k,c as f,a as V,w as t,b as e,M as h,A as T,l as v,i as I,e as N,V as A,N as B,O as M,h as _,G as S,x as j,m as U,K as z,g as F,P as L}from"./index-6yqTO6Xn.js";import{p as P}from"./admin-BsvIVDVa.js";import{V as R}from"./VSpacer-DENIAofq.js";import{V as D}from"./VForm-X9FYPwC0.js";import{V as p}from"./VTextField-DmoPaxrQ.js";import{V as G}from"./VAlert-Bsh1A1Jx.js";import"./VInput-jUQZEwvB.js";import"./VField-D4f68aLd.js";const J="/images/bg-login.jpg",K={__name:"login",setup(O){const i=r(""),d=r(""),u=r(""),g=r(""),n=r(!1),m=y();x();const o=C({loading:!1,errmsg:"",succmsg:"",record:{}}),w=()=>{P({username:i.value,password:d.value,verifyCode:u.value}).then(s=>{if(s.data&&s.data.code===200){let a=s.data.data;m.userId=parseInt(a.id),m.userName=a.name,m.token=a.token,o.succmsg="登录成功，即将跳转...",o.errmsg="",setTimeout(()=>{window.location.assign("/admin")},1e3)}else o.errmsg=s.data.data,c()}).catch(s=>{s.response&&s.response.data&&s.response.data.code&&(o.errmsg=s.response.data.data)})},c=()=>{g.value="http://localhost:6011/captcha?t="+Date.now()};return k(()=>{c()}),(s,a)=>(V(),f(L,null,{default:t(()=>[e(h,null,{default:t(()=>[e(T,{fluid:"",class:"fill-height bg-grey-lighten-2 pa-0"},{default:t(()=>[e(v,{src:J,class:"bg-login w-100",cover:""}),e(I,{justify:"center",align:"center"},{default:t(()=>[e(N,{cols:"12",sm:"6",md:"4",lg:"3"},{default:t(()=>[e(A,{class:"elevation-12",rounded:"lg"},{default:t(()=>[e(B,{color:"primary",dark:"",flat:""},{default:t(()=>[e(M,{class:"text-h6"},{default:t(()=>a[4]||(a[4]=[_(" 登录华鑫管理后台 ")])),_:1,__:[4]}),e(R),e(S,{icon:"mdi-login-variant",size:"large",class:"mr-3"})]),_:1}),e(j,null,{default:t(()=>[e(D,{onSubmit:U(w,["prevent"])},{default:t(()=>[e(p,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l),label:"管理员","prepend-inner-icon":"mdi-account",variant:"outlined",class:"mb-4",clearable:""},null,8,["modelValue"]),e(p,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=l=>d.value=l),label:"密码","prepend-inner-icon":"mdi-key",variant:"outlined",type:n.value?"text":"password","append-inner-icon":n.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":a[2]||(a[2]=l=>n.value=!n.value),clearable:""},null,8,["modelValue","type","append-inner-icon"]),e(p,{modelValue:u.value,"onUpdate:modelValue":a[3]||(a[3]=l=>u.value=l),label:"验证码","prepend-inner-icon":"mdi-security",variant:"outlined"},{"append-inner":t(()=>[e(v,{src:g.value,width:"140",onClick:c},null,8,["src"])]),_:1},8,["modelValue"]),o.errmsg||o.succmsg?(V(),f(G,{key:0,color:o.errmsg?"warning":"success",variant:"tonal",text:o.errmsg?o.errmsg:o.succmsg},null,8,["color","text"])):z("",!0),e(F,{block:"",size:"large",color:"primary",class:"mt-6",type:"submit"},{default:t(()=>a[5]||(a[5]=[_(" 登录 ")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Z=b(K,[["__scopeId","data-v-626a3c47"]]);export{Z as default};
