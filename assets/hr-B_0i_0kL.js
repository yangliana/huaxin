import{d as h,s as S,r as k,o as q,c as y,a as V,V as C,w as a,b as e,i as T,y as E,z as I,e as f,E as p,g,h as c,F as N,x,H as B,u as b,q as W,G as D,t as G}from"./index-Dc9JgZ5a.js";import{r as _}from"./validate-BxfLMkoi.js";import{k as j,g as z}from"./admin-Dn8ru81H.js";import{V as A}from"./VForm-_qL_3cmE.js";import{V as v}from"./VTextField-C-kUFvZN.js";import{V as P}from"./VTextarea-DBN2ElQF.js";import{V as H,a as w,b as L,c as F}from"./VTabs-D8S6Q1K8.js";import"./VInput-HubAIwMk.js";import"./VField-BByKy3t6.js";const M=h({__name:"records",setup(U){const d=S(null),l=k({loading:!1,type:"hr-records",records:[]}),n=()=>{l.records.push({name:"",type:"",counts:1,description:""})},m=o=>{l.records.splice(o,1)},u=o=>{l.loading=!0,d.value.validate().then(({valid:r,errors:s})=>{if(!r)return Promise.reject(s);if(l.records.length<=0)return Promise.reject("至少配置1个招聘岗位")}).then(()=>j(l.type,l.records)).then(r=>{r.data&&r.data.code===200&&b().show("保存成功")}).catch(r=>{typeof r=="string"&&b().error(r)}).finally(()=>{l.loading=!1})},t=()=>{z(l.type).then(o=>{o.data&&o.data.code===200&&(l.records=o.data.data)}).catch(o=>{console.error(o)})};return q(()=>{t()}),(o,r)=>(V(),y(C,{loading:l.loading,class:"py-5"},{default:a(()=>[e(x,null,{default:a(()=>[e(A,{ref_key:"refForm",ref:d},{default:a(()=>[e(T,null,{default:a(()=>[(V(!0),E(N,null,I(l.records,(s,$)=>(V(),y(f,{cols:"12",sm:"12",md:"6"},{default:a(()=>[e(T,{dense:""},{default:a(()=>[e(f,{cols:"12"},{default:a(()=>[e(v,{modelValue:s.name,"onUpdate:modelValue":i=>s.name=i,label:"岗位名称","prepend-inner-icon":"mdi-account-tie-hat-outline",rules:[p(_).required]},{"append-inner":a(()=>[e(g,{"prepend-icon":"mdi-trash-can",size:"small",variant:"plain",color:"primary",onClick:i=>m($)},{default:a(()=>r[0]||(r[0]=[c("删除")])),_:2,__:[0]},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(f,{cols:"8"},{default:a(()=>[e(v,{modelValue:s.type,"onUpdate:modelValue":i=>s.type=i,"prepend-inner-icon":"mdi-shape-outline",label:"岗位类型",rules:[p(_).required]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(f,{cols:"4"},{default:a(()=>[e(v,{modelValue:s.counts,"onUpdate:modelValue":i=>s.counts=i,"prepend-inner-icon":"mdi-sigma",label:"招聘数量",type:"number",rules:[p(_).required]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(f,{cols:"12"},{default:a(()=>[e(P,{modelValue:s.description,"onUpdate:modelValue":i=>s.description=i,label:"描述内容",rules:[p(_).required]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1},512)]),_:1}),e(B,null,{default:a(()=>[e(g,{disabled:l.loading,variant:"elevated",color:"success","prepend-icon":"mdi-plus-circle",onClick:n},{default:a(()=>r[1]||(r[1]=[c("新增")])),_:1,__:[1]},8,["disabled"]),e(g,{loading:l.loading,variant:"elevated",color:"primary",onClick:u},{default:a(()=>r[2]||(r[2]=[c("保存")])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["loading"]))}}),R=h({__name:"summary",setup(U){const d=S(null),l=k({loading:!1,type:"hr-summary",record:{summary:""}}),n=u=>{l.loading=!0,d.value.validate().then(({valid:t,errors:o})=>{if(!t)return Promise.reject(o)}).then(()=>j(l.type,l.record)).then(t=>{t.data&&t.data.code===200&&b().show("保存成功")}).catch(t=>{typeof t=="string"&&b().error(t)}).finally(()=>{l.loading=!1})},m=()=>{z(l.type).then(u=>{if(u.data&&u.data.code===200){let t=u.data.data;Array.isArray(t)&&t.length>0&&(l.record=t[0])}}).catch(u=>{console.error(u)})};return q(()=>{m()}),(u,t)=>(V(),y(C,{loading:l.loading,class:""},{default:a(()=>[e(x,null,{default:a(()=>[e(A,{ref_key:"refForm",ref:d},{default:a(()=>[e(P,{modelValue:l.record.summary,"onUpdate:modelValue":t[0]||(t[0]=o=>l.record.summary=o),label:"招聘时显示的联系方式等资料",rules:[p(_).required]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),e(B,null,{default:a(()=>[e(g,{loading:l.loading,variant:"elevated",color:"primary",onClick:n},{default:a(()=>t[1]||(t[1]=[c("保存")])),_:1,__:[1]},8,["loading"])]),_:1})]),_:1},8,["loading"]))}}),le=h({__name:"hr",setup(U){const d=k({title:"招聘信息",tab:"records"});return(l,n)=>(V(),y(C,{loading:d.loading,"max-width":"1000"},{default:a(()=>[e(W,{class:"bg-success"},{default:a(()=>[e(D,{icon:"mdi-account-group-outline",size:"small",class:"mr-1"}),c(" "+G(d.title),1)]),_:1}),e(x,null,{default:a(()=>[e(H,{modelValue:d.tab,"onUpdate:modelValue":n[0]||(n[0]=m=>d.tab=m)},{default:a(()=>[e(w,{value:"records",color:"primary"},{default:a(()=>n[2]||(n[2]=[c("岗位列表")])),_:1,__:[2]}),e(w,{value:"summary",color:"secondary"},{default:a(()=>n[3]||(n[3]=[c("联系方式")])),_:1,__:[3]})]),_:1},8,["modelValue"]),e(L,{modelValue:d.tab,"onUpdate:modelValue":n[1]||(n[1]=m=>d.tab=m)},{default:a(()=>[e(F,{value:"records"},{default:a(()=>[e(M)]),_:1}),e(F,{value:"summary"},{default:a(()=>[e(R)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["loading"]))}});export{le as default};
