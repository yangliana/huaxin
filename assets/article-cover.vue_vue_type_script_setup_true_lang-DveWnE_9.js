import{_ as y}from"./uploadImage.vue_vue_type_script_setup_true_lang-BCoKKDIs.js";import{d as U,s as h,r as D,c as p,a as n,V,w as s,b as t,h as u,q as E,x as B,i as I,y as _,z as j,e as F,l as w,E as i,F as N,I as S,J as T,K as q,j as z,g as k,u as $}from"./index-DxW6Q-Ya.js";import{V as H}from"./VDialog-Cb9aY2Jf.js";import{V as J}from"./VHover-zJvRixXI.js";const K={key:0,class:"w-100 h-100 d-flex align-center justify-center",style:{"background-color":"rgba(40, 40, 40, 0.6)"}},L={class:"text-center"},G=U({__name:"article-cover",props:{modelValue:{type:String,required:!0},refEditor:{type:Object,required:!1}},emits:["update:modelValue"],setup(m,{emit:x}){const c=m,f=x,g=h(null),l=D({showDialog:!1,imgUrls:[]}),b=r=>{f("update:modelValue",r),l.showDialog=!1},v=()=>{if(c.refEditor){var r=[],e=c.refEditor.getContent();e.raw&&e.raw.ops&&e.raw.ops.forEach(o=>{o.insert&&typeof o.insert=="object"&&o.insert.image&&r.push(o.insert.image)}),l.imgUrls=r,l.imgUrls.length>0?l.showDialog=!0:$().show("正文未发现图片",{color:"error"})}};return(r,e)=>{const o=y;return n(),p(V,{variant:"text",class:"w-50"},{default:s(()=>[t(E,{class:"text-subtitle-2 pa-1"},{default:s(()=>e[3]||(e[3]=[u(" 封面图 ")])),_:1,__:[3]}),t(o,{ref_key:"refUpload",ref:g,onSuccess:e[0]||(e[0]=(a,d)=>f("update:modelValue",a))},null,512),t(H,{modelValue:i(l).showDialog,"onUpdate:modelValue":e[1]||(e[1]=a=>i(l).showDialog=a),class:"w-75 h-75"},{default:s(()=>[t(V,null,{default:s(()=>[t(B,null,{default:s(()=>[t(I,{dense:""},{default:s(()=>[(n(!0),_(N,null,j(i(l).imgUrls,(a,d)=>(n(),p(F,{cols:"6",md:"4"},{default:s(()=>[t(w,{src:a||"/images/404.png",cover:"","max-height":"260",onClick:C=>b(a)},null,8,["src","onClick"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(J,null,{default:s(({isHovering:a,props:d})=>[t(w,S({cover:"",src:m.modelValue||"/images/404.png"},d),{default:s(()=>[t(T,null,{default:s(()=>[a?(n(),_("div",K,[z("div",L,[t(k,{size:"small",block:"",class:"mb-2",color:"blue",onClick:v},{default:s(()=>e[4]||(e[4]=[u("从正文选择图")])),_:1,__:[4]}),t(k,{size:"small",block:"",color:"green",onClick:e[2]||(e[2]=C=>i(g).trigger(0))},{default:s(()=>e[5]||(e[5]=[u("自定义上传图")])),_:1,__:[5]})])])):q("",!0)]),_:2},1024)]),_:2},1040,["src"])]),_:1})]),_:1})}}});export{G as _};
