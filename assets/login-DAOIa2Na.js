import{_ as b,s as r,L as x,C as y,r as C,o as k,c as V,a as v,w as t,b as a,M as h,A as T,l as _,i as I,e as M,V as N,N as A,O as B,h as c,v as S,x as j,m as R,K as U,g as F,P as L}from"./index-CBPGFmfO.js";import{p as P}from"./admin-bFQgo93F.js";import{V as z}from"./VSpacer-CMAaYwTQ.js";import{V as D}from"./VForm-BPx39aqs.js";import{V as f}from"./VTextField-BEe9Nexe.js";import{V as J}from"./VAlert-ihaHdVrt.js";import"./VInput-jMiW4Vic.js";import"./VField-BzBafDPM.js";const K="/images/bg-login.jpg",O={__name:"login",setup($){const d=r(""),i=r(""),u=r(""),g=r(""),n=r(!1),m=x();y();const l=C({loading:!1,errmsg:"",succmsg:"",record:{}}),w=()=>{P({username:d.value,password:i.value,verifyCode:u.value}).then(s=>{if(s.data&&s.data.code===200){let e=s.data.data;m.userId=parseInt(e.id),m.userName=e.name,m.token=e.token,l.succmsg="登录成功，即将跳转...",l.errmsg="",setTimeout(()=>{window.location.assign("/admin")},1e3)}else l.errmsg=s.data.data,p()}).catch(s=>{s.response&&s.response.data&&s.response.data.code&&(l.errmsg=s.response.data.data)})},p=()=>{g.value="https://www.hxanddb.com:8080/captcha?t="+Date.now()};return k(()=>{p()}),(s,e)=>(v(),V(L,null,{default:t(()=>[a(h,null,{default:t(()=>[a(T,{fluid:"",class:"fill-height bg-grey-lighten-2 pa-0"},{default:t(()=>[a(_,{src:K,class:"bg-login w-100",cover:""}),a(I,{justify:"center",align:"center"},{default:t(()=>[a(M,{cols:"12",sm:"6",md:"4",lg:"3"},{default:t(()=>[a(N,{class:"elevation-12",rounded:"lg"},{default:t(()=>[a(A,{color:"primary",dark:"",flat:""},{default:t(()=>[a(B,{class:"text-h6"},{default:t(()=>e[4]||(e[4]=[c(" 登录华鑫管理后台 ")])),_:1,__:[4]}),a(z),a(S,{label:"",href:"http://106.13.55.112/",target:"_blank",class:"mr-2"},{default:t(()=>e[5]||(e[5]=[c("登录CRM")])),_:1,__:[5]})]),_:1}),a(j,null,{default:t(()=>[a(D,{onSubmit:R(w,["prevent"])},{default:t(()=>[a(f,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value=o),label:"管理员","prepend-inner-icon":"mdi-account",variant:"outlined",class:"mb-4",clearable:""},null,8,["modelValue"]),a(f,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),label:"密码","prepend-inner-icon":"mdi-key",variant:"outlined",type:n.value?"text":"password","append-inner-icon":n.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=o=>n.value=!n.value),clearable:""},null,8,["modelValue","type","append-inner-icon"]),a(f,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),label:"验证码","prepend-inner-icon":"mdi-security",variant:"outlined"},{"append-inner":t(()=>[a(_,{src:g.value,width:"140",onClick:p},null,8,["src"])]),_:1},8,["modelValue"]),l.errmsg||l.succmsg?(v(),V(J,{key:0,color:l.errmsg?"warning":"success",variant:"tonal",text:l.errmsg?l.errmsg:l.succmsg},null,8,["color","text"])):U("",!0),a(F,{block:"",size:"large",color:"primary",class:"mt-6",type:"submit"},{default:t(()=>e[6]||(e[6]=[c(" 登录 ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Z=b(O,[["__scopeId","data-v-c116209e"]]);export{Z as default};
