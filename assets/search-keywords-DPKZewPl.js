import{d as g,s as p,r as y,o as V,c as i,a as s,w as t,b as o,q as _,h as d,G as k,k as h,x as w,y as x,F as C,z as v,H as b,g as S,V as F,u as f}from"./index-W0lyqUYg.js";import{k as B,g as T}from"./admin-9lWvLNLq.js";import{V as j}from"./VForm-BqgtsuLj.js";import{V as z}from"./VTextField-CJVc9cmF.js";import"./VInput-CMMR21Py.js";import"./VField-Cu3yU4X9.js";const I=g({__name:"search-keywords",setup(E){const n=p(null),e=y({loading:!1,type:"search-keywords",maxCounts:5,records:[]}),m=()=>{e.loading=!0,n.value.validate().then(r=>{if(!r.valid)return Promise.reject(!1);var a=!1;return e.records.forEach(l=>{l.keyword&&(a=!0)}),a?B(e.type,e.records):(f().show("至少一个搜索词",{color:"red"}),Promise.reject(!1))}).then(r=>{r.data&&r.data.code===200&&f().show("保存成功")}).finally(()=>{e.loading=!1})},c=()=>{T(e.type).then(r=>{if(r.data&&r.data.code===200){e.records=r.data.data;for(let a=e.records.length;a<e.maxCounts;++a)e.records.push({keyword:""})}}).catch(r=>{console.error(r)})};return V(()=>{c()}),(r,a)=>(s(),i(F,{loading:e.loading,"max-width":"1000"},{default:t(()=>[o(_,{class:"bg-primary"},{default:t(()=>[o(k,{icon:"mdi-magnify",size:"small",class:"mr-1"}),a[0]||(a[0]=d(" 首页搜索词 "))]),_:1,__:[0]}),o(h,{class:"bg-grey-lighten-2 py-2"},{default:t(()=>a[1]||(a[1]=[d(" 设置首页搜索区的热门搜索词 ")])),_:1,__:[1]}),o(w,null,{default:t(()=>[o(j,{ref_key:"refForm",ref:n},{default:t(()=>[(s(!0),x(C,null,v(e.records,(l,N)=>(s(),i(z,{modelValue:l.keyword,"onUpdate:modelValue":u=>l.keyword=u,label:"热门搜索词","prepend-inner-icon":"mdi-magnify",clearable:""},null,8,["modelValue","onUpdate:modelValue"]))),256))]),_:1},512)]),_:1}),o(b,null,{default:t(()=>[o(S,{loading:e.loading,variant:"elevated",color:"primary",onClick:m},{default:t(()=>a[2]||(a[2]=[d("保存")])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["loading"]))}});export{I as default};
