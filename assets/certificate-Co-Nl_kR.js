import{_ as F}from"./uploadImage.vue_vue_type_script_setup_true_lang-CoIOZwuM.js";import{d as L,s as P,r as T,o as z,c as g,a as d,V,w as l,b as a,i as w,y as C,z as U,e as k,l as x,g as _,h as u,F as h,x as v,H as R,u as y,q as D,G as N}from"./index-W0lyqUYg.js";import{k as E,g as I}from"./admin-9lWvLNLq.js";import{V as W}from"./VTextField-CJVc9cmF.js";import{V as j}from"./VDialog-Zq0646DZ.js";import{V as q,a as $,b as A,c as B}from"./VTabs-CNHH_Kwx.js";import"./VFileInput-BIGodEJL.js";import"./VField-Cu3yU4X9.js";import"./VInput-CMMR21Py.js";const G=L({__name:"all",setup(S){const e=P(null),o=T({loading:!1,type:"about-us-certificate-all",records:[]}),i=()=>{o.records.push({imgUrl:"",title:"资质证书"})},m=t=>{o.records.splice(t,1)},r=()=>(o.loading=!0,new Promise((t,s)=>{var f=0;return o.records.forEach(c=>{c.imgUrl&&(f+=1)}),f===0?(y().show("资质证书列表不能为空",{color:"red"}),s(!1)):t(E(o.type,o.records))}).then(t=>{t.data&&t.data.code===200&&y().show("保存成功")}).finally(()=>{o.loading=!1})),n=()=>{I(o.type).then(t=>{t.data&&t.data.code===200&&(o.records=t.data.data)}).catch(t=>{console.error(t)})};return z(()=>{n()}),(t,s)=>{const f=F;return d(),g(V,{loading:o.loading,class:"py-5"},{default:l(()=>[a(v,null,{default:l(()=>[a(f,{ref_key:"refUpload",ref:e,onSuccess:s[0]||(s[0]=(c,p)=>o.records[p].imgUrl=c)},null,512),a(w,{dense:""},{default:l(()=>[(d(!0),C(h,null,U(o.records,(c,p)=>(d(),g(k,{lg:"4",xl:"4",md:"6",sm:"6"},{default:l(()=>[a(x,{src:c.imgUrl||"/images/404.png"},null,8,["src"]),a(W,{modelValue:c.title,"onUpdate:modelValue":b=>c.title=b,label:"标题","hide-details":"",density:"compact"},{"append-inner":l(()=>[a(_,{color:"primary",size:"small",variant:"plain",onClick:b=>e.value.trigger(p)},{default:l(()=>s[1]||(s[1]=[u("上传图")])),_:2,__:[1]},1032,["onClick"]),a(_,{color:"error",size:"small",variant:"plain",onClick:b=>m(p)},{default:l(()=>s[2]||(s[2]=[u("删除")])),_:2,__:[2]},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1}),a(R,null,{default:l(()=>[a(_,{disabled:o.loading,variant:"elevated",color:"success","prepend-icon":"mdi-plus-circle",onClick:i},{default:l(()=>s[3]||(s[3]=[u("新增")])),_:1,__:[3]},8,["disabled"]),a(_,{loading:o.loading,variant:"elevated",color:"primary",onClick:r},{default:l(()=>s[4]||(s[4]=[u("保存")])),_:1,__:[4]},8,["loading"])]),_:1})]),_:1},8,["loading"])}}}),H=L({__name:"summary",setup(S){const e=T({loading:!1,type:"about-us-certificate-summary",records:[],showList:!1,certificateList:[],currentIndex:0,promiseResolve:null}),o=r=>(e.currentIndex=r,e.showList=!0,new Promise((n,t)=>{e.promiseResolve=n}).then(n=>{e.showList=!1,e.records[e.currentIndex].imgUrl=n})),i=()=>(e.loading=!0,new Promise((r,n)=>{var t=0;return e.records.forEach(s=>{s.imgUrl&&(t+=1)}),t===0?(y().show("资质证书列表不能为空",{color:"red"}),n(!1)):r(E(e.type,e.records))}).then(r=>{r.data&&r.data.code===200&&y().show("保存成功")}).finally(()=>{e.loading=!1})),m=()=>{I(e.type).then(r=>{r.data&&r.data.code===200&&(e.records=r.data.data);for(let n=e.records.length;n<4;++n)e.records.push({imgUrl:""})}).then(()=>I("about-us-certificate-all")).then(r=>{r.data&&r.data.code===200&&(e.certificateList=r.data.data)}).catch(r=>{console.error(r)})};return z(()=>{m()}),(r,n)=>(d(),g(V,{loading:e.loading,class:"py-5"},{default:l(()=>[a(j,{modelValue:e.showList,"onUpdate:modelValue":n[0]||(n[0]=t=>e.showList=t),class:"w-75 h-75"},{default:l(()=>[a(V,null,{default:l(()=>[a(v,null,{default:l(()=>[a(w,{dense:""},{default:l(()=>[(d(!0),C(h,null,U(e.certificateList,(t,s)=>(d(),g(k,{lg:"3",xl:"3",md:"4",sm:"4"},{default:l(()=>[a(x,{src:t.imgUrl||"/images/404.png",onClick:f=>e.promiseResolve(t.imgUrl)},null,8,["src","onClick"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(v,null,{default:l(()=>[a(w,{dense:""},{default:l(()=>[(d(!0),C(h,null,U(e.records,(t,s)=>(d(),g(k,{lg:"4",xl:"4",md:"6",sm:"6"},{default:l(()=>[a(x,{src:t.imgUrl||"/images/404.png",onClick:f=>o(s)},null,8,["src","onClick"])]),_:2},1024))),256))]),_:1})]),_:1}),a(R,null,{default:l(()=>[a(_,{loading:e.loading,variant:"elevated",color:"primary",onClick:i},{default:l(()=>n[1]||(n[1]=[u("保存")])),_:1,__:[1]},8,["loading"])]),_:1})]),_:1},8,["loading"]))}}),ae=L({__name:"certificate",setup(S){const e=T({tab:"all"});return(o,i)=>(d(),g(V,{loading:e.loading,"max-width":"1000"},{default:l(()=>[a(D,{class:"bg-success"},{default:l(()=>[a(N,{icon:"mdi-seal-variant",size:"small",class:"mr-1"}),i[2]||(i[2]=u(" 资质证书 "))]),_:1,__:[2]}),a(v,null,{default:l(()=>[a(q,{modelValue:e.tab,"onUpdate:modelValue":i[0]||(i[0]=m=>e.tab=m)},{default:l(()=>[a($,{value:"all",color:"orange"},{default:l(()=>i[3]||(i[3]=[u("资质证书")])),_:1,__:[3]}),a($,{value:"summary",color:"blue"},{default:l(()=>i[4]||(i[4]=[u("证书摘要")])),_:1,__:[4]})]),_:1},8,["modelValue"]),a(A,{modelValue:e.tab,"onUpdate:modelValue":i[1]||(i[1]=m=>e.tab=m)},{default:l(()=>[a(B,{value:"all"},{default:l(()=>[a(G)]),_:1}),a(B,{value:"summary"},{default:l(()=>[a(H)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["loading"]))}});export{ae as default};
