import{h as S}from"./moment-C5S46NFB.js";import{U as J,a6 as O,aW as G,bl as K,af as W,b8 as Q,b as t,I,b1 as X,d as A,c as u,y as h,a as s,q as M,w as a,j as x,K as f,h as d,t as m,E as B,v as y,G as H,n as P,g as V,p as b,r as Z,aH as ee,o as te,V as w,x as $,F as k,z as D,l as ae,i as oe,e as le,J as re,H as F,A as ie,u as se,_ as ne}from"./index-CBQGO4TK.js";import{n as de,o as ue}from"./admin-DqLRzy3m.js";import"./index.es-BaLHAT6A.js";import{V as ce}from"./VDialog-kI4d2tuM.js";import{V as T,m as me}from"./VCheckboxBtn-Bw_FNK6e.js";import{a as pe,V as z,m as fe}from"./VInput-VBAr4TQG.js";import{V as ge}from"./VTooltip-CDuPQOfQ.js";import{V as he}from"./VEmptyState-DtIIGMy3.js";import{V as Ve}from"./VPagination-BrsDnxij.js";import"./VSelectionControl-B0YKyYDq.js";const ve=O({...fe(),...X(me(),["inline"])},"VCheckbox"),ye=J()({name:"VCheckbox",inheritAttrs:!1,props:ve(),emits:{"update:modelValue":o=>!0,"update:focused":o=>!0},setup(o,e){let{attrs:p,slots:v}=e;const l=G(o,"modelValue"),{isFocused:c,focus:n,blur:i}=pe(o),r=K();return W(()=>{const[g,C]=Q(p),U=z.filterProps(o),Y=T.filterProps(o);return t(z,I({class:["v-checkbox",o.class]},g,U,{modelValue:l.value,"onUpdate:modelValue":_=>l.value=_,id:o.id||`checkbox-${r}`,focused:c.value,style:o.style}),{...v,default:_=>{let{id:j,messagesId:L,isDisabled:N,isReadonly:E,isValid:R}=_;return t(T,I(Y,{id:j.value,"aria-describedby":L.value,disabled:N.value,readonly:E.value},C,{error:R.value===!1,modelValue:l.value,"onUpdate:modelValue":q=>l.value=q,onFocus:n,onBlur:i}),v)}})}),{}}}),xe={key:1,class:"bg-primary pt-2"},be={class:"position-absolute right-0 top-0"},ke=A({__name:"attr",props:{display:{type:String,default:"inline",required:!1},record:{type:Object,required:!0}},emits:["remove"],setup(o,{emit:e}){const p=e;return(v,l)=>o.display==="inline"?(s(),u(M,{key:0,class:"d-flex justify-space-between pr-0 align-center bg-primary"},{default:a(()=>[x("div",null,[t(y,{variant:"text","prepend-icon":"mdi-calendar-outline"},{default:a(()=>[d(m(B(S)(o.record.createTime).format("YY-MM-DD HH:mm")),1)]),_:1}),t(y,{variant:"text","prepend-icon":"mdi-account-circle-outline"},{default:a(()=>[d(m(o.record.name),1)]),_:1}),o.record.phone?(s(),u(y,{key:0,variant:"text","prepend-icon":"mdi-phone-outline"},{default:a(()=>[d(m(o.record.phone),1)]),_:1})):f("",!0),o.record.email?(s(),u(y,{key:1,variant:"text","prepend-icon":"mdi-email-outline"},{default:a(()=>[d(m(o.record.email),1)]),_:1})):f("",!0)]),t(V,{variant:"text",class:""},{default:a(()=>[t(H,{icon:"mdi-dots-vertical"}),t(P,{activator:"parent"},{default:a(()=>[t(V,{color:"red",onClick:l[0]||(l[0]=c=>p("remove",o.record.id))},{default:a(()=>l[2]||(l[2]=[d("确认删除")])),_:1,__:[2]})]),_:1})]),_:1})]),_:1})):(s(),h("div",xe,[t(b,{"prepend-icon":"mdi-calendar-outline",title:B(S)(o.record.createTime).format("YYYY-MM-DD HH:mm:ss")},null,8,["title"]),t(b,{"prepend-icon":"mdi-account-circle-outline",title:o.record.name},null,8,["title"]),o.record.phone?(s(),u(b,{key:0,"prepend-icon":"mdi-phone-outline",title:o.record.phone},null,8,["title"])):f("",!0),o.record.email?(s(),u(b,{key:1,"prepend-icon":"mdi-email-outline",title:o.record.email},null,8,["title"])):f("",!0),x("div",be,[t(V,{variant:"plain","prepend-icon":"mdi-trash-can"},{default:a(()=>[l[4]||(l[4]=d(" 删除 ")),t(P,{activator:"parent"},{default:a(()=>[t(V,{color:"red",onClick:l[1]||(l[1]=c=>p("remove",o.record.id))},{default:a(()=>l[3]||(l[3]=[d("确认删除")])),_:1,__:[3]})]),_:1})]),_:1,__:[4]})])]))}}),Ce={style:{"white-space":"pre-line","line-height":"1.8em"}},_e={key:0},we={class:"d-flex"},De={class:"tooltip-content"},Ie=A({__name:"index",setup(o){const e=Z({loading:!1,empty:!1,title:"售后服务反馈",current:null,recordsCount:0,records:[],types:["退换货","维修","咨询"],search:{types:[]},pageCurrent:1,pageSize:6,pageLength:ee(()=>Math.ceil(e.recordsCount/e.pageSize)),showDialog:!1,record:{}}),p=n=>{e.loading=!0,de(n).then(i=>{i.data&&i.data.code===200&&(se().show("删除成功"),e.pageCurrent=1,c())}).finally(()=>{e.loading=!1})},v=()=>{e.pageCurrent=1,c()},l=n=>{e.record=e.records[n],e.showDialog=!0},c=()=>{e.loading=!0,ue(e.search.types,e.pageCurrent,e.pageSize).then(n=>{n.data&&n.data.code===200&&(e.recordsCount=n.data.data.count,e.records=n.data.data.records,e.empty=!(e.records.length>0),e.records.forEach(i=>{i.images=JSON.parse(i.images)}))}).catch(n=>{console.error(n)}).finally(()=>{e.loading=!1})};return te(()=>{c()}),(n,i)=>(s(),u(ie,{"max-width":"1200",class:"pa-0"},{default:a(()=>[t(ce,{modelValue:e.showDialog,"onUpdate:modelValue":i[0]||(i[0]=r=>e.showDialog=r),"max-height":"70%","max-width":n.$vuetify.display.sm?"70%":"50%",transition:"fade"},{default:a(()=>[t(w,null,{default:a(()=>[t(ke,{record:e.record,display:"lines",onRemove:p},null,8,["record"]),t($,{class:"text-grey-darken-3"},{default:a(()=>[x("div",Ce,m(e.record.message),1),e.record.images.length>0?(s(),h("div",_e,[(s(!0),h(k,null,D(e.record.images,(r,g)=>(s(),h(k,null,[r?(s(),u(ae,{key:0,src:r,"max-width":"80%",class:"mx-auto"},null,8,["src"])):f("",!0)],64))),256))])):f("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","max-width"]),t(w,{loading:e.loading},{default:a(()=>[t(M,{class:"bg-blue-lighten-1 align-center py-1 d-flex justify-space-between"},{default:a(()=>[t(y,{variant:"text","prepend-icon":"mdi-face-agent",size:"large"},{default:a(()=>[d(m(e.title),1)]),_:1}),x("div",we,[(s(!0),h(k,null,D(e.types,r=>(s(),u(ye,{modelValue:e.search.types,"onUpdate:modelValue":[i[1]||(i[1]=g=>e.search.types=g),v],value:r,label:r,density:"compact","hide-details":"",class:"mx-1"},null,8,["modelValue","value","label"]))),256))])]),_:1}),t($,{class:"mt-3"},{default:a(()=>[t(oe,null,{default:a(()=>[(s(!0),h(k,null,D(e.records,(r,g)=>(s(),u(le,{cols:"6",sm:"6",md:"4",lg:"3"},{default:a(()=>[t(re,{appear:""},{default:a(()=>[t(w,I({image:r.images.length>0?r.images[0]:void 0,height:"160",transition:"fab",ref_for:!0},n.props,{onClick:C=>l(g)}),{default:a(()=>[t(M,{class:"position-absolute bottom-0 text-subtitle-2 text-white",style:{"background-color":"rgba(30, 30, 30, 0.7)"}},{default:a(()=>[d(m(r.message),1)]),_:2},1024),t(ge,{activator:"parent",location:"bottom","max-width":"300px","max-heigth":100},{default:a(()=>[x("div",De,m(r.message),1)]),_:2},1024),t(F,{class:"pa-0"},{default:a(()=>[t(V,{icon:"",color:"red",disabled:e.loading,size:"small"},{default:a(()=>[t(H,{icon:"mdi-trash-can"}),t(P,{activator:"parent"},{default:a(()=>[t(V,{color:"red",onClick:C=>p(r.id)},{default:a(()=>i[3]||(i[3]=[d(" 确认删除 ")])),_:2,__:[3]},1032,["onClick"])]),_:2},1024)]),_:2},1032,["disabled"])]),_:2},1024)]),_:2},1040,["image","onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1}),e.empty?(s(),u(he,{key:0,icon:"mdi-magnify",title:"当前没有服务反馈"})):f("",!0)]),_:1}),t(F,{class:"justify-center"},{default:a(()=>[t(Ve,{color:"primary",modelValue:e.pageCurrent,"onUpdate:modelValue":[i[2]||(i[2]=r=>e.pageCurrent=r),c],length:e.pageLength,"total-visible":5},null,8,["modelValue","length"])]),_:1})]),_:1},8,["loading"])]),_:1}))}}),Ye=ne(Ie,[["__scopeId","data-v-06edc1d4"]]);export{Ye as default};
