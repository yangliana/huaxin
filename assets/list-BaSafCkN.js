import{g as w,r as $,a as B}from"./admin-BsvIVDVa.js";import{d as _,r as b,o as C,c as p,a as m,V as g,w as t,b as a,e as f,f as L,g as V,h as c,i as k,j as y,k as T,t as x,l as j,m as v,n as z,p as F,q as S,u as M,s as h,v as N,x as D,y as I,F as K,z as P,A as R}from"./index-6yqTO6Xn.js";import{V as U}from"./VSelect-BSNUi_6_.js";import{V as q}from"./VTextField-DmoPaxrQ.js";import"./VInput-jUQZEwvB.js";import"./VCheckboxBtn-825EUVoI.js";import"./VSelectionControl-BxcIUMEe.js";import"./VField-D4f68aLd.js";const A=_({__name:"search",emits:["search"],setup(d,{expose:u,emit:l}){const i=l,r=b({record:{category:null,title:null},optionCategoryList:[]}),e=()=>r.record;return C(()=>{w("product-category").then(n=>{n.data&&n.data.code===200&&(r.optionCategoryList=n.data.data.map(o=>o.name))})}),u({getData:e}),(n,o)=>(m(),p(g,{variant:"text",class:"my-3"},{default:t(()=>[a(k,{dense:""},{default:t(()=>[a(f,{cols:"5",md:"4",sm:"5"},{default:t(()=>[a(U,{modelValue:r.record.category,"onUpdate:modelValue":o[0]||(o[0]=s=>r.record.category=s),label:"产品分类","prepend-inner-icon":"mdi-shape-outline",items:r.optionCategoryList,multiple:"","hide-details":""},null,8,["modelValue","items"])]),_:1}),a(f,{cols:"5",md:"4",sm:"5"},{default:t(()=>[a(q,{modelValue:r.record.title,"onUpdate:modelValue":o[1]||(o[1]=s=>r.record.title=s),label:"产品标题","prepend-inner-icon":"mdi-pencil-outline",clearable:"","hide-details":"",onKeyup:o[2]||(o[2]=L(s=>i("search",r.record),["enter"])),"onClick:clear":o[3]||(o[3]=s=>i("search",r.record))},null,8,["modelValue"])]),_:1}),a(f,{class:"d-flex align-center"},{default:t(()=>[a(V,{"prepend-icon":"mdi-magnify",color:"primary",onClick:o[4]||(o[4]=s=>i("search",r.record))},{default:t(()=>o[5]||(o[5]=[c("检索")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1}))}}),E={class:"text-end"},G={class:"text-truncate"},H=_({__name:"list-item",props:["product","index"],emits:["refresh"],setup(d,{emit:u}){const l=u,i=r=>{$(r).then(e=>{e.data&&e.data.code===200&&(M().show("删除成功"),l("refresh"))})};return(r,e)=>(m(),p(g,{to:`/admin/product/edit/${d.product.id}`},{default:t(()=>[a(j,{src:d.product.cover,height:"180",cover:""},{default:t(()=>[y("div",E,[a(T,{class:"d-inline-block px-2 py-1 bg-blue"},{default:t(()=>[c(x(d.product.category),1)]),_:1})])]),_:1},8,["src"]),a(S,{class:"pl-2 pr-0 bg-grey-lighten-4 text-body-1 d-flex justify-space-between align-center"},{default:t(()=>[y("div",G,x(d.product.title),1),a(V,{variant:"plain",size:"small",color:"red","prepend-icon":"mdi-trash-can",onClick:e[1]||(e[1]=v(()=>{},["prevent"]))},{default:t(()=>[e[3]||(e[3]=c(" 删除 ")),a(z,{density:"compact",activator:"parent"},{default:t(()=>[a(F,{class:"bg-red",onClick:e[0]||(e[0]=v(n=>i(d.product.id),["prevent"]))},{default:t(()=>e[2]||(e[2]=[c(" 确认删除 ")])),_:1,__:[2]})]),_:1})]),_:1,__:[3]})]),_:1})]),_:1},8,["to"]))}}),te=_({__name:"list",setup(d){h(null);const u=h(null),l=b({loading:!1,records:[],search:{}}),i=e=>{l.search=e,r()},r=()=>{l.loading=!0,B(l.search.category||[],l.search.title||"").then(e=>{e.data&&e.data.code===200&&(l.records=e.data.data)}).catch(e=>{console.error(e)}).finally(()=>{l.loading=!1})};return C(()=>{r()}),(e,n)=>(m(),p(R,{"max-width":"1200",class:"pa-0"},{default:t(()=>[a(g,{loading:l.loading},{default:t(()=>[a(S,{class:"bg-blue-lighten-1 d-flex align-center justify-space-between"},{default:t(()=>[a(N,{variant:"text","prepend-icon":"mdi-cart-outline",size:"large"},{default:t(()=>n[0]||(n[0]=[c("产品列表")])),_:1,__:[0]}),a(V,{color:"success","prepend-icon":"mdi-plus",to:"/admin/product/create"},{default:t(()=>n[1]||(n[1]=[c("创建产品")])),_:1,__:[1]})]),_:1}),a(D,null,{default:t(()=>[a(A,{ref_key:"refSearch",ref:u,onSearch:i},null,512),a(g,{variant:"text"},{default:t(()=>[a(k,{dense:""},{default:t(()=>[(m(!0),I(K,null,P(l.records,(o,s)=>(m(),p(f,{cols:"6",lg:"4",md:"4",sm:"6"},{default:t(()=>[a(H,{product:o,index:s,onRefresh:r},null,8,["product","index"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}))}});export{te as default};
