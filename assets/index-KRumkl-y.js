import{r as n}from"./validate-BxfLMkoi.js";import{d as x,s as b,r as h,T as C,c as m,a as c,w as l,b as a,i as f,K as v,e as d,V as y,E as o,q as k,v as w,h as p,t as B,x as P,H as T,g as F,A as N,c8 as S,u as U}from"./index-CgpHTJ9_.js";import{B as q}from"./news-list-Bg-UX1Xe.js";import{_ as j}from"./contract-us.vue_vue_type_script_setup_true_lang-Bqqm68Hc.js";import{V as z}from"./VForm-CUPs4Puc.js";import{V as u}from"./VTextField-GMKXjoVd.js";import{V as A}from"./VTextarea-DxHbC4Pl.js";import"./VInput-uEpnQqPP.js";import"./VField-CqBiyUiR.js";const G=x({__name:"index",setup(E){const i=b(null),e=h({loading:!1,title:"在线留言",hasPosted:!1,record:{name:"",phone:"",email:"",message:""}});C().setItems([{title:e.title,disabled:!0}]);const V=r=>!e.record.phone&&!e.record.email?"电话或者邮箱至少填写一项":r?n.phone(r):!0,_=r=>!e.record.phone&&!e.record.email?"电话或者邮箱至少填写一项":r?n.email(r):!0,g=()=>{i.value.validate().then(({valid:r,errors:t})=>{if(!r)return Promise.reject(t)}).then(()=>S(e.record)).then(r=>{console.log(r),r.data&&r.data.code===200&&(i.value.reset(),e.hasPosted=!0,U().show("留言成功"))}).catch(r=>{}).finally(()=>{e.loading=!1})};return(r,t)=>(c(),m(N,{"max-width":"1200",class:"pa-0"},{default:l(()=>[a(f,{dense:""},{default:l(()=>[r.$vuetify.display.xs?v("",!0):(c(),m(d,{key:0,cols:"0",sm:"3"},{default:l(()=>[a(q,{size:3,class:"mt-3"}),a(j)]),_:1})),a(d,{cols:"12",sm:"9"},{default:l(()=>[a(y,{variant:"text",loading:o(e).loading},{default:l(()=>[a(k,null,{default:l(()=>[a(w,{variant:"text",size:"x-large",color:"blue","prepend-icon":"mdi-message-processing-outline"},{default:l(()=>[p(B(o(e).title),1)]),_:1})]),_:1}),a(P,null,{default:l(()=>[a(z,{ref_key:"refForm",ref:i,disabled:o(e).hasPosted},{default:l(()=>[a(f,{dense:""},{default:l(()=>[a(d,{cols:"7"},{default:l(()=>[a(u,{modelValue:o(e).record.name,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).record.name=s),"prepend-inner-icon":"mdi-account-outline",label:"您的姓名",rules:[o(n).required]},null,8,["modelValue","rules"])]),_:1}),a(d,{cols:"7"},{default:l(()=>[a(u,{modelValue:o(e).record.phone,"onUpdate:modelValue":t[1]||(t[1]=s=>o(e).record.phone=s),"prepend-inner-icon":"mdi-phone-outline",label:"联系电话",rules:[V]},null,8,["modelValue","rules"])]),_:1}),a(d,{cols:"7"},{default:l(()=>[a(u,{modelValue:o(e).record.email,"onUpdate:modelValue":t[2]||(t[2]=s=>o(e).record.email=s),"prepend-inner-icon":"mdi-email-outline",label:"电子邮箱",rules:[_]},null,8,["modelValue","rules"])]),_:1}),a(d,{cols:"12"},{default:l(()=>[a(A,{modelValue:o(e).record.message,"onUpdate:modelValue":t[3]||(t[3]=s=>o(e).record.message=s),"prepend-inner-icon":"mdi-message-reply-text-outline",label:"留言内容",rules:[o(n).required],rows:"8",counter:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1}),a(T,{class:"justify-center"},{default:l(()=>[a(F,{variant:"elevated",color:"primary","prepend-icon":"mdi-check",disabled:o(e).hasPosted,onClick:g},{default:l(()=>t[4]||(t[4]=[p("提交")])),_:1,__:[4]},8,["disabled"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))}});export{G as default};
