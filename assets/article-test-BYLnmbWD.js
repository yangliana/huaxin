import{d as p,s as C,B as g,r as h,o as _,aB as b,y as w,a as v,b as a,w as n,q as k,h as u,x,E as q,H as V,g as B,V as c,F as T}from"./index-CBPGFmfO.js";import{I as E,Q}from"./quill.imageUploader-D88r1wV1.js";import{i as U,h as y,j as H}from"./admin-bFQgo93F.js";const L=p({__name:"article-test",setup(I){const d=C(null),i=parseInt(g().params.id),o=h({rawContent:null,htmlContent:null,quill:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"+1"},{indent:"-1"}],[{header:[1,2,3,4,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],modules:{name:"imageUploader",module:E,options:{upload:e=>new Promise((t,l)=>{const r=new FormData;r.append("image",e),U(r).then(s=>{console.log(s.data.data),t(s.data.data)}).catch(s=>{l("Upload failed"),console.error("Error:",s)})})}}}}),m=()=>{var e=d.value.getHTML();o.htmlContent=e,y({id:i,rawContent:o.rawContent,htmlContent:e}).then(t=>{t.data&&t.data.code===200&&console.log(t.data.data)})},f=()=>{i>0&&H({id:i}).then(e=>{if(e.data&&e.data.code===200&&e.data.data.rawContent)try{var t=JSON.parse(e.data.data.rawContent);d.value.setContents(t.ops?t.ops:[],"silent")}catch(l){console.error(l)}})};return _(()=>{f()}),(e,t)=>{const l=b("v-text");return v(),w(T,null,[a(c,null,{default:n(()=>[a(k,null,{default:n(()=>t[1]||(t[1]=[u("Editor Quill")])),_:1,__:[1]}),a(x,null,{default:n(()=>[a(q(Q),{ref_key:"refQuill",ref:d,content:o.rawContent,"onUpdate:content":t[0]||(t[0]=r=>o.rawContent=r),theme:"snow",toolbar:o.quill.toolbar,modules:o.quill.modules,style:{"min-height":"400px"}},null,8,["content","toolbar","modules"])]),_:1}),a(V,null,{default:n(()=>[a(B,{onClick:m},{default:n(()=>t[2]||(t[2]=[u("Save")])),_:1,__:[2]})]),_:1})]),_:1}),a(c,{class:"bg-blue-lighten-4 pa-3"},{default:n(()=>[a(l,{innerHTML:o.htmlContent},null,8,["innerHTML"])]),_:1})],64)}}});export{L as default};
