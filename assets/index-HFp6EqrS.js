import{d as m,r as _,o as y,c,a as o,V as g,w as s,b as l,h as n,q as C,y as p,z as h,g as S,t as b,F as x,Q as k,B as q,R as u,i as f,e as i,K as $,A as w,S as R,T as N}from"./index-Bf5RujO8.js";import{_ as T}from"./list-item.vue_vue_type_script_setup_true_lang-TcjFQX4C.js";import{V as E,_ as F}from"./VSheet-ChlPvU44.js";import{V as L}from"./VEmptyState-DENzeJHb.js";import"./VTooltip-CRczSnK-.js";const z=m({__name:"category-list-mobile",setup(V){const a=_({loading:!1,records:[]}),t=()=>{a.loading=!0,k("product-category").then(r=>{r.data&&r.data.code===200&&(a.records=r.data.data)}).catch(r=>{console.error(r)}).finally(()=>{a.loading=!1})};return y(()=>{t()}),(r,e)=>(o(),c(g,{variant:"text",loading:a.loading},{default:s(()=>[l(C,{class:"text-primary"},{default:s(()=>e[0]||(e[0]=[n("产品中心")])),_:1,__:[0]}),l(E,{class:"d-flex flex-wrap flex-start"},{default:s(()=>[(o(!0),p(x,null,h(a.records,d=>(o(),c(S,{variant:"text",to:`/product/category/${d.name}`,"active-color":"primary"},{default:s(()=>[n(b(d.name),1)]),_:2},1032,["to"]))),256))]),_:1})]),_:1},8,["loading"]))}}),P=m({__name:"index",setup(V){const a=q(),t=_({loading:!1,category:null,empty:!1,records:[]}),r=()=>{t.loading=!0,R(t.category,a.query.search||"").then(e=>{e.data&&e.data.code===200&&(t.records=e.data.data,t.empty=!(t.records.length>0))}).then(()=>{var e=[{title:"产品中心",to:"/product",disabled:!1}];t.category&&e.push({title:t.category,disabled:!0}),a.query.search&&e.push({title:"搜索词: "+a.query.search,disabled:!0}),N().setItems(e)}).catch(e=>{console.error(e)}).finally(()=>{t.loading=!1})};return y(()=>{r()}),u(()=>a.params.category,(e,d)=>{e!=d&&(t.category=e?e.trim():"",r())},{immediate:!0}),u(()=>a.query.search,(e,d)=>{e!=d&&r()}),(e,d)=>(o(),c(w,{"max-width":"1200"},{default:s(()=>[l(f,{dense:""},{default:s(()=>[l(i,{cols:"12",sm:"2"},{default:s(()=>[e.$vuetify.display.xs?(o(),c(z,{key:0})):(o(),c(F,{key:1}))]),_:1}),l(i,{cols:"12",sm:"10"},{default:s(()=>[l(g,{variant:"text"},{default:s(()=>[l(f,{dense:""},{default:s(()=>[(o(!0),p(x,null,h(t.records,(v,B)=>(o(),c(i,{cols:"6",xl:"4",lg:"4",md:"4",sm:"6"},{default:s(()=>[l(T,{product:v,index:B,onRefresh:r},null,8,["product","index"])]),_:2},1024))),256))]),_:1})]),_:1}),t.empty?(o(),c(L,{key:0,icon:"mdi-magnify",title:"该分类下没有产品"})):$("",!0)]),_:1})]),_:1})]),_:1}))}});export{P as default};
