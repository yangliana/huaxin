import{d as x,s as u,r as w,o as k,c as m,a as i,V as C,w as a,b as s,y as h,z as B,p as L,E as b,j as g,aq as T,h as n,t as d,v as $,g as c,m as p,n as z,F as M,a0 as N,u as S}from"./index-DxW6Q-Ya.js";import{e as j,f as A}from"./admin-BQebbhHa.js";const E={class:"text-body-2 text-grey mt-1"},D=x({__name:"news-list",props:["category","type"],setup(y){const l=y,_=l.type?l.type:"news";u(null),u(null);const o=w({loading:!1,category:l.category?l.category:"公司新闻",record:[]}),v=e=>(o.loading=!0,e.id<=0||A(e.id).then(t=>{t.data&&t.data.code===200&&(S().show("删除成功"),setTimeout(()=>{f()},1500))}).catch(t=>{}).finally(()=>{o.loading=!1}),!1),f=()=>{j(o.category).then(e=>{console.log(e.data.data),e.data&&e.data.code===200&&(o.records=e.data.data)}).catch(e=>{console.error(e)})};return k(()=>{f()}),(e,t)=>(i(),m(C,{loading:o.loading,class:"py-5"},{default:a(()=>[s(N,null,{default:a(()=>[(i(!0),h(M,null,B(o.records,(r,F)=>(i(),m(L,{to:`/admin/article/${b(_)}/edit/${r.id}`},{default:a(()=>[s(T,{class:"d-flex align-center justify-space-between"},{default:a(()=>[n(d(r.title)+" ",1),g("div",null,[s($,{variant:"text",size:"small",color:"grey"},{default:a(()=>[n(d(r.createTime),1)]),_:2},1024),s(c,{color:"warning",size:"small",variant:"plain",onClick:p(V=>!1,["prevent"])},{default:a(()=>[t[2]||(t[2]=n(" 删除 ")),s(z,{activator:"parent"},{default:a(()=>[s(c,{color:"error",onClick:p(V=>v(r),["prevent"])},{default:a(()=>t[0]||(t[0]=[n("确认删除")])),_:2,__:[0]},1032,["onClick"]),s(c,{color:"info"},{default:a(()=>t[1]||(t[1]=[n("取消删除")])),_:1,__:[1]})]),_:2},1024)]),_:2,__:[2]},1024)])]),_:2},1024),g("div",E,d(r.summary)+" ... ",1)]),_:2},1032,["to"]))),256))]),_:1})]),_:1},8,["loading"]))}});export{D as _};
