import{_ as b}from"./editor.vue_vue_type_script_setup_true_lang-CK-4PtLy.js";import{d as m,s as c,r as _,o as g,c as y,a as p,V as w,w as o,b as t,g as C,h as s,H as k,u as f,q as S,G as j,x as P}from"./index-W0lyqUYg.js";import{k as x,g as E}from"./admin-9lWvLNLq.js";import{V as T}from"./VForm-BqgtsuLj.js";import{V as B}from"./VTextarea-DrB6iB_W.js";import{V as $,a as V,b as I,c as h}from"./VTabs-CNHH_Kwx.js";import"./quill.imageUploader-C5OuRJAa.js";import"./VInput-CMMR21Py.js";import"./VField-Cu3yU4X9.js";const U=m({__name:"employee",setup(v){const l=c(null),d=c(null),e=_({loading:!1,type:"about-us-employee",record:{raw:null,html:""}}),i=()=>{e.loading=!0,d.value.validate().then(r=>{if(!r.valid)return Promise.reject(!1);var a=l.value.getContent();return!a.raw||!a.html?(f().show("正文内容不能为空",{color:"red"}),Promise.reject(!1)):(e.record.raw=a.raw,e.record.html=a.html,console.log(e.type),console.log(e.record),x(e.type,e.record))}).then(r=>{r.data&&r.data.code===200&&f().show("保存成功")}).finally(()=>{e.loading=!1})},u=()=>{E(e.type).then(r=>{r.data&&r.data.code===200&&Array.isArray(r.data.data)&&r.data.data.length===1&&(e.record=r.data.data[0],l.value.setContent(e.record.raw))}).catch(r=>{console.error(r)})};return g(()=>{u()}),(r,a)=>{const n=b;return p(),y(w,{loading:e.loading,class:"py-5"},{default:o(()=>[t(T,{ref_key:"refForm",ref:d},{default:o(()=>[t(n,{ref_key:"refEditor",ref:l,raw:e.record.raw},null,8,["raw"])]),_:1},512),t(k,null,{default:o(()=>[t(C,{loading:e.loading,variant:"elevated",color:"primary",onClick:i},{default:o(()=>a[0]||(a[0]=[s("保存")])),_:1,__:[0]},8,["loading"])]),_:1})]),_:1},8,["loading"])}}}),N=m({__name:"culture",setup(v){const l=c(null),d=c(null),e=_({loading:!1,type:"about-us-culture",record:{raw:null,html:""}}),i=()=>{e.loading=!0,d.value.validate().then(r=>{if(!r.valid)return Promise.reject(!1);var a=l.value.getContent();return!a.raw||!a.html?(f().show("正文内容不能为空",{color:"red"}),Promise.reject(!1)):(e.record.raw=a.raw,e.record.html=a.html,console.log(e.type),console.log(e.record),x(e.type,e.record))}).then(r=>{r.data&&r.data.code===200&&f().show("保存成功")}).finally(()=>{e.loading=!1})},u=()=>{E(e.type).then(r=>{r.data&&r.data.code===200&&Array.isArray(r.data.data)&&r.data.data.length===1&&(e.record=r.data.data[0],l.value.setContent(e.record.raw))}).catch(r=>{console.error(r)})};return g(()=>{u()}),(r,a)=>{const n=b;return p(),y(w,{loading:e.loading,class:"py-5"},{default:o(()=>[t(T,{ref_key:"refForm",ref:d},{default:o(()=>[t(n,{ref_key:"refEditor",ref:l,raw:e.record.raw},null,8,["raw"])]),_:1},512),t(k,null,{default:o(()=>[t(C,{loading:e.loading,variant:"elevated",color:"primary",onClick:i},{default:o(()=>a[0]||(a[0]=[s("保存")])),_:1,__:[0]},8,["loading"])]),_:1})]),_:1},8,["loading"])}}}),W=m({__name:"introduction",setup(v){const l=c(null),d=c(null),e=_({loading:!1,type:"about-us-introduction",record:{summary:"",raw:null,html:""}}),i=a=>{if(a){if(a.length<10)return"摘要不能少于10字";if(a.length>100)return"摘要不能多于100字"}else return"摘要不能为空";return!0},u=()=>{e.loading=!0,d.value.validate().then(a=>{if(!a.valid)return Promise.reject(!1);var n=l.value.getContent();return!n.raw||!n.html?(f().show("正文内容不能为空",{color:"red"}),Promise.reject(!1)):(e.record.raw=n.raw,e.record.html=n.html,console.log(e.type),console.log(e.record),x(e.type,e.record))}).then(a=>{a.data&&a.data.code===200&&f().show("保存成功")}).finally(()=>{e.loading=!1})},r=()=>{E(e.type).then(a=>{a.data&&a.data.code===200&&Array.isArray(a.data.data)&&a.data.data.length===1&&(e.record=a.data.data[0],l.value.setContent(e.record.raw))}).catch(a=>{console.error(a)})};return g(()=>{r()}),(a,n)=>{const A=b;return p(),y(w,{loading:e.loading,class:"py-5"},{default:o(()=>[t(T,{ref_key:"refForm",ref:d},{default:o(()=>[t(B,{modelValue:e.record.summary,"onUpdate:modelValue":n[0]||(n[0]=F=>e.record.summary=F),label:"首页摘要内容",rules:[i]},null,8,["modelValue","rules"]),t(A,{ref_key:"refEditor",ref:l,raw:e.record.raw},null,8,["raw"])]),_:1},512),t(k,null,{default:o(()=>[t(C,{loading:e.loading,variant:"elevated",color:"primary",onClick:u},{default:o(()=>n[1]||(n[1]=[s("保存")])),_:1,__:[1]},8,["loading"])]),_:1})]),_:1},8,["loading"])}}}),O=m({__name:"about-us",setup(v){const l=_({tab:"introduction"});return g(()=>{}),(d,e)=>{const i=W,u=N,r=U;return p(),y(w,{loading:l.loading,"max-width":"1000"},{default:o(()=>[t(S,{class:"bg-primary"},{default:o(()=>[t(j,{icon:"mdi-information-variant-circle",size:"small",class:"mr-1"}),e[2]||(e[2]=s(" 关于我们 "))]),_:1,__:[2]}),t(P,null,{default:o(()=>[t($,{modelValue:l.tab,"onUpdate:modelValue":e[0]||(e[0]=a=>l.tab=a)},{default:o(()=>[t(V,{value:"introduction",color:"red"},{default:o(()=>e[3]||(e[3]=[s("关于我们")])),_:1,__:[3]}),t(V,{value:"culture",color:"blue"},{default:o(()=>e[4]||(e[4]=[s("企业文化")])),_:1,__:[4]}),t(V,{value:"employee",color:"green"},{default:o(()=>e[5]||(e[5]=[s("员工风采")])),_:1,__:[5]})]),_:1},8,["modelValue"]),t(I,{modelValue:l.tab,"onUpdate:modelValue":e[1]||(e[1]=a=>l.tab=a)},{default:o(()=>[t(h,{value:"introduction"},{default:o(()=>[t(i)]),_:1}),t(h,{value:"culture"},{default:o(()=>[t(u)]),_:1}),t(h,{value:"employee"},{default:o(()=>[t(r)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["loading"])}}});export{O as default};
