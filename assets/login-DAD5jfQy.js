import{_ as b,s as n,L as y,C as x,r as C,o as h,c as f,a as V,w as t,b as e,M as k,A as T,l as v,i as I,e as N,V as j,N as A,O as B,h as _,G as M,x as S,m as U,K as z,g as F,P as L}from"./index-CBQGO4TK.js";import{p as P}from"./admin-DqLRzy3m.js";import{V as R}from"./VSpacer-uTIMW3RT.js";import{V as D}from"./VForm-CEf76I9c.js";import{V as p}from"./VTextField-DJVw3mL1.js";import{V as G}from"./VAlert-00fnD3BY.js";import"./VInput-VBAr4TQG.js";import"./VField-DFRgda3J.js";const J="https://cdn.jsdelivr.net/gh/yangliana/huaxin@main/images/bg-login.jpg",K={__name:"login",setup(O){const i=n(""),d=n(""),u=n(""),g=n(""),r=n(!1),m=y();x();const s=C({loading:!1,errmsg:"",succmsg:"",record:{}}),w=()=>{P({username:i.value,password:d.value,verifyCode:u.value}).then(l=>{if(l.data&&l.data.code===200){let a=l.data.data;m.userId=parseInt(a.id),m.userName=a.name,m.token=a.token,s.succmsg="登录成功，即将跳转...",s.errmsg="",setTimeout(()=>{window.location.assign("/admin")},1e3)}else s.errmsg=l.data.data,c()}).catch(l=>{l.response&&l.response.data&&l.response.data.code&&(s.errmsg=l.response.data.data)})},c=()=>{g.value="http://localhost:6011/captcha?t="+Date.now()};return h(()=>{c()}),(l,a)=>(V(),f(L,null,{default:t(()=>[e(k,null,{default:t(()=>[e(T,{fluid:"",class:"fill-height bg-grey-lighten-2 pa-0"},{default:t(()=>[e(v,{src:J,class:"bg-login w-100",cover:""}),e(I,{justify:"center",align:"center"},{default:t(()=>[e(N,{cols:"12",sm:"6",md:"4",lg:"3"},{default:t(()=>[e(j,{class:"elevation-12",rounded:"lg"},{default:t(()=>[e(A,{color:"primary",dark:"",flat:""},{default:t(()=>[e(B,{class:"text-h6"},{default:t(()=>a[4]||(a[4]=[_(" 登录华鑫管理后台 ")])),_:1,__:[4]}),e(R),e(M,{icon:"mdi-login-variant",size:"large",class:"mr-3"})]),_:1}),e(S,null,{default:t(()=>[e(D,{onSubmit:U(w,["prevent"])},{default:t(()=>[e(p,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=o=>i.value=o),label:"管理员","prepend-inner-icon":"mdi-account",variant:"outlined",class:"mb-4",clearable:""},null,8,["modelValue"]),e(p,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=o=>d.value=o),label:"密码","prepend-inner-icon":"mdi-key",variant:"outlined",type:r.value?"text":"password","append-inner-icon":r.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":a[2]||(a[2]=o=>r.value=!r.value),clearable:""},null,8,["modelValue","type","append-inner-icon"]),e(p,{modelValue:u.value,"onUpdate:modelValue":a[3]||(a[3]=o=>u.value=o),label:"验证码","prepend-inner-icon":"mdi-security",variant:"outlined"},{"append-inner":t(()=>[e(v,{src:g.value,width:"140",onClick:c},null,8,["src"])]),_:1},8,["modelValue"]),s.errmsg||s.succmsg?(V(),f(G,{key:0,color:s.errmsg?"warning":"success",variant:"tonal",text:s.errmsg?s.errmsg:s.succmsg},null,8,["color","text"])):z("",!0),e(F,{block:"",size:"large",color:"primary",class:"mt-6",type:"submit"},{default:t(()=>a[5]||(a[5]=[_(" 登录 ")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Z=b(K,[["__scopeId","data-v-626a3c47"]]);export{Z as default};
